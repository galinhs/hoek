(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"0fa5":function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("b-container",{attrs:{id:"shop"}},[e("b-row",{staticClass:"mt-5"},[e("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"12",md:"3"}},[e("b-list-group",{attrs:{variant:"dark"}},[e("b-list-group-item",{attrs:{active:""===t.category,href:"#"},on:{click:function(r){t.category=""}}},[t._v("全部商品")]),e("b-list-group-item",{attrs:{active:"攝影書"===t.category,href:"#"},on:{click:function(r){t.category="攝影書"}}},[t._v("攝影書")]),e("b-list-group-item",{attrs:{active:"雜誌"===t.category,href:"#"},on:{click:function(r){t.category="雜誌"}}},[t._v("雜誌")]),e("b-list-group-item",{attrs:{active:"畫集"===t.category,href:"#"},on:{click:function(r){t.category="畫集"}}},[t._v("畫集")]),e("b-list-group-item",{attrs:{active:"其他"===t.category,href:"#"},on:{click:function(r){t.category="其他"}}},[t._v("其他")])],1)],1),t.isLoading?e("b-col",{attrs:{cols:"12",md:"9"}},[e("b-row",t._l(t.products,(function(t){return e("b-col",{attrs:{cols:"6",md:"4"}},[e("b-card",[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-skeleton-img")],1)],1),e("b-row",{staticClass:"text-center"},[e("b-col",{staticClass:"mt-3",attrs:{cols:"12"}},[e("b-skeleton",{staticClass:"ml-3",attrs:{animation:"fade",width:"85%"}}),e("b-skeleton",{staticClass:"ml-5",attrs:{animation:"fade",width:"55%"}}),e("b-skeleton",{staticClass:"mt-2 ml-5",attrs:{animation:"fade",width:"40%"}})],1)],1)],1)],1)})),1)],1):t._e(),t.isLoading?t._e():e("b-col",{attrs:{cols:"12",md:"9"}},[e("b-row",t._l(t.filtered,(function(r){return e("b-col",{key:r._id,attrs:{cols:"6",md:"4"}},[e("router-link",{attrs:{to:"/product/"+r._id}},[e("ProductCard",{staticClass:"border-0",attrs:{product:r}}),e("b-btn",{attrs:{variant:"transparent"},on:{click:t.addcart}},[e("b-icon-cart-fill",{attrs:{product:r._id}})],1)],1)],1)})),1)],1)],1)],1)},n=[],c=e("1da1"),o=(e("96cf"),e("4de4"),e("caad"),e("2532"),e("d81d"),e("99af"),function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("b-card",{staticClass:"product-card mx-auto d-flex align-items-center"},[e("div",{staticClass:"card-img"},[e("img",{attrs:{src:t.product.image[0]}})]),e("b-card-body",{staticClass:"p-1",attrs:{title:t.product.name,"sub-title":t.product.author}}),e("b-card-text",[t._v(t._s("$"+t.product.price))])],1)}),s=[],i={name:"ProductCard",props:{product:{type:Object,required:!0}}},u=i,l=(e("64b4"),e("2877")),d=Object(l["a"])(u,o,s,!1,null,null,null),p=d.exports,f={name:"Shop",data:function(){return{products:[],category:"",isLoading:!0}},components:{ProductCard:p},computed:{filtered:function(){var t=this;return this.products.filter((function(r){return r.category.includes(t.category)}))}},methods:{getProducts:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var e,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.axios.get("/products");case 3:e=r.sent,a=e.data,t.products=a.result.map((function(t){return t.image&&(t.image=t.image.map((function(t){return"".concat("https://hoekgallery.herokuapp.com","/files/").concat(t)}))),t})),t.isLoading=!1,r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},addcart:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==t.$store.state.jwt.token.length){r.next=3;break}return t.$swal({icon:"error",title:"請先登入"}),r.abrupt("return");case 3:return r.prev=3,r.next=6,t.axios.post("/users/cart",{product:t.product,amount:1},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 6:t.$swal({icon:"success",title:"已加入購物車"}),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](3),console.log(r.t0),t.$swal({icon:"error",title:"加入購物車失敗"});case 13:case"end":return r.stop()}}),r,null,[[3,9]])})))()}},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.getProducts();case 1:case"end":return r.stop()}}),r)})))()}},m=f,b=(e("ace4"),Object(l["a"])(m,a,n,!1,null,null,null));r["default"]=b.exports},1985:function(t,r,e){},2532:function(t,r,e){"use strict";var a=e("23e7"),n=e("5a34"),c=e("1d80"),o=e("ab13");a({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(c(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(t,r,e){var a=e("861d"),n=e("c6b6"),c=e("b622"),o=c("match");t.exports=function(t){var r;return a(t)&&(void 0!==(r=t[o])?!!r:"RegExp"==n(t))}},"5a34":function(t,r,e){var a=e("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"64b4":function(t,r,e){"use strict";e("1985")},"70ac":function(t,r,e){},ab13:function(t,r,e){var a=e("b622"),n=a("match");t.exports=function(t){var r=/./;try{"/./"[t](r)}catch(e){try{return r[n]=!1,"/./"[t](r)}catch(a){}}return!1}},ace4:function(t,r,e){"use strict";e("70ac")},caad:function(t,r,e){"use strict";var a=e("23e7"),n=e("4d64").includes,c=e("44d2");a({target:"Array",proto:!0},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),c("includes")}}]);
//# sourceMappingURL=shop.c736d2a0.js.map