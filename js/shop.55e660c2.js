(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"0fa5":function(t,r,e){"use strict";e.r(r);var a=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("b-container",{attrs:{id:"shop"}},[e("b-row",{staticClass:"mt-5"},[e("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"12",md:"3"}},[e("b-list-group",{staticClass:"list-group list-group-flush",attrs:{variant:"dark"}},[e("b-list-group-item",{attrs:{active:""===t.category,href:"#"},on:{click:function(r){t.category=""}}},[t._v("全部商品")]),e("b-list-group-item",{attrs:{active:"攝影書"===t.category,href:"#"},on:{click:function(r){t.category="攝影書"}}},[t._v("攝影書")]),e("b-list-group-item",{attrs:{active:"雜誌"===t.category,href:"#"},on:{click:function(r){t.category="雜誌"}}},[t._v("雜誌")]),e("b-list-group-item",{attrs:{active:"畫集"===t.category,href:"#"},on:{click:function(r){t.category="畫集"}}},[t._v("畫集")]),e("b-list-group-item",{attrs:{active:"其他"===t.category,href:"#"},on:{click:function(r){t.category="其他"}}},[t._v("其他")])],1)],1),t.isLoading?e("b-col",{attrs:{cols:"12",md:"9"}},[e("b-row",t._l(t.products,(function(t){return e("b-col",{attrs:{cols:"6",md:"4"}},[e("b-card",[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-skeleton-img")],1)],1),e("b-row",{staticClass:"text-center"},[e("b-col",{staticClass:"mt-3",attrs:{cols:"12"}},[e("b-skeleton",{staticClass:"ml-3",attrs:{animation:"fade",width:"85%"}}),e("b-skeleton",{staticClass:"ml-5",attrs:{animation:"fade",width:"55%"}}),e("b-skeleton",{staticClass:"mt-2 ml-5",attrs:{animation:"fade",width:"40%"}})],1)],1)],1)],1)})),1)],1):t._e(),t.isLoading?t._e():e("b-col",{attrs:{cols:"12",md:"9"}},[e("b-row",t._l(t.filtered,(function(t){return e("b-col",{key:t._id,staticClass:"d-flex flex-column mb-3",attrs:{cols:"6",md:"4"}},[e("ProductCard",{staticClass:"border-0",attrs:{product:t}})],1)})),1)],1)],1)],1)},c=[],o=e("1da1"),n=(e("96cf"),e("4de4"),e("caad"),e("2532"),e("d81d"),e("99af"),function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("b-card",{staticClass:"product-card mx-auto h-100 mb-auto",attrs:{"no-body":""}},[e("router-link",{attrs:{to:"/product/"+t.product._id}},[e("div",{staticClass:"card-img"},[e("img",{attrs:{src:t.product.image[0]}})])]),e("b-card-body",{staticClass:"pt-3 pb-0 mb-auto text-center"},[e("router-link",{attrs:{to:"/product/"+t.product._id}},[e("b-card-title",[t._v(t._s(t.product.name))]),e("b-card-sub-title",[t._v(t._s(t.product.author))])],1)],1),e("b-card-text",{staticClass:"mx-auto mb-1"},[t._v(t._s("$"+t.product.price))]),e("b-btn",{staticClass:"ml-auto",attrs:{variant:"transparent"},on:{click:function(r){return t.addcart(t.product._id)}}},[e("b-icon-cart-fill")],1)],1)}),s=[],i={name:"ProductCard",props:{product:{type:Object,required:!0}},methods:{addcart:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==r.$store.state.jwt.token.length){e.next=3;break}return r.$swal({icon:"error",title:"請先登入"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,r.axios.post("/users/cart",{product:t,amount:1},{headers:{authorization:"Bearer "+r.$store.state.jwt.token}});case 6:r.$swal({icon:"success",title:"已加入購物車"}),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),console.log(e.t0),r.$swal({icon:"error",title:"加入購物車失敗"});case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()}}},u=i,l=(e("64b4"),e("2877")),d=Object(l["a"])(u,n,s,!1,null,null,null),p=d.exports,m={name:"Shop",data:function(){return{products:[],category:"",isLoading:!1}},components:{ProductCard:p},computed:{filtered:function(){var t=this;return this.products.filter((function(r){return r.category.includes(t.category)}))}},methods:{getProducts:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var e,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.isLoading=!0,r.next=4,t.axios.get("/products");case 4:e=r.sent,a=e.data,t.products=a.result.map((function(r){return r.image&&(r.image=r.image.map((function(t){return"".concat("https://hoekgallery.herokuapp.com","/files/").concat(t)}))),t.isLoading=!1,r})),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.getProducts();case 1:case"end":return r.stop()}}),r)})))()}},b=m,f=(e("ace4"),Object(l["a"])(b,a,c,!1,null,null,null));r["default"]=f.exports},1985:function(t,r,e){},"64b4":function(t,r,e){"use strict";e("1985")},"70ac":function(t,r,e){},ace4:function(t,r,e){"use strict";e("70ac")}}]);
//# sourceMappingURL=shop.55e660c2.js.map