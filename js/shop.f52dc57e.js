(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop"],{"0fa5":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-container",{attrs:{id:"shop"}},[r("b-row",{staticClass:"mt-5"},[r("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"12",md:"3"}},[r("b-list-group",{attrs:{variant:"dark"}},[r("b-list-group-item",{attrs:{active:""===t.category,href:"#"},on:{click:function(e){t.category=""}}},[t._v("全部商品")]),r("b-list-group-item",{attrs:{active:"攝影書"===t.category,href:"#"},on:{click:function(e){t.category="攝影書"}}},[t._v("攝影書")]),r("b-list-group-item",{attrs:{active:"雜誌"===t.category,href:"#"},on:{click:function(e){t.category="雜誌"}}},[t._v("雜誌")]),r("b-list-group-item",{attrs:{active:"畫集"===t.category,href:"#"},on:{click:function(e){t.category="畫集"}}},[t._v("畫集")]),r("b-list-group-item",{attrs:{active:"其他"===t.category,href:"#"},on:{click:function(e){t.category="其他"}}},[t._v("其他")])],1)],1),t.isLoading?r("b-col",{attrs:{cols:"12",md:"9"}},[r("b-row",t._l(t.products,(function(t){return r("b-col",{attrs:{cols:"6",md:"4"}},[r("b-card",[r("b-row",[r("b-col",{attrs:{cols:"12"}},[r("b-skeleton-img")],1)],1),r("b-row",{staticClass:"text-center"},[r("b-col",{staticClass:"mt-3",attrs:{cols:"12"}},[r("b-skeleton",{staticClass:"ml-3",attrs:{animation:"fade",width:"85%"}}),r("b-skeleton",{staticClass:"ml-5",attrs:{animation:"fade",width:"55%"}}),r("b-skeleton",{staticClass:"mt-2 ml-5",attrs:{animation:"fade",width:"40%"}})],1)],1)],1)],1)})),1)],1):t._e(),t.isLoading?t._e():r("b-col",{attrs:{cols:"12",md:"9"}},[r("b-row",t._l(t.filtered,(function(e){return r("b-col",{key:e._id,attrs:{cols:"6",md:"4"}},[r("router-link",{attrs:{to:"/product/"+e._id}},[r("ProductCard",{staticClass:"border-0",attrs:{product:e}})],1),r("b-btn",{attrs:{variant:"transparent"},on:{click:t.addcart}},[r("b-icon-cart-fill",{attrs:{product:e}})],1)],1)})),1)],1)],1)],1)},c=[],n=r("1da1"),o=(r("96cf"),r("4de4"),r("caad"),r("2532"),r("d81d"),r("99af"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"product-card mx-auto d-flex align-items-center"},[r("div",{staticClass:"card-img"},[r("img",{attrs:{src:t.product.image[0]}})]),r("b-card-body",{staticClass:"p-1",attrs:{title:t.product.name,"sub-title":t.product.author}}),r("b-card-text",[t._v(t._s("$"+t.product.price))])],1)}),s=[],i={name:"ProductCard",props:{product:{type:Object,required:!0}}},u=i,l=(r("64b4"),r("2877")),d=Object(l["a"])(u,o,s,!1,null,null,null),p=d.exports,f={name:"Shop",data:function(){return{products:[],category:"",isLoading:!0}},components:{ProductCard:p},computed:{filtered:function(){var t=this;return this.products.filter((function(e){return e.category.includes(t.category)}))}},methods:{getProducts:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.axios.get("/products");case 3:r=e.sent,a=r.data,t.products=a.result.map((function(t){return t.image&&(t.image=t.image.map((function(t){return"".concat("https://hoekgallery.herokuapp.com","/files/").concat(t)}))),t})),t.isLoading=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},addcart:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.$store.state.jwt.token.length){e.next=3;break}return t.$swal({icon:"error",title:"請先登入"}),e.abrupt("return");case 3:return e.prev=3,console.log(t.products.id),e.next=7,t.axios.post("/users/cart",{product:t.product.id,amount:1},{headers:{authorization:"Bearer "+t.$store.state.jwt.token}});case 7:t.$swal({icon:"success",title:"已加入購物車"}),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0),t.$swal({icon:"error",title:"加入購物車失敗"});case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))()}},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getProducts();case 1:case"end":return e.stop()}}),e)})))()}},m=f,b=(r("ace4"),Object(l["a"])(m,a,c,!1,null,null,null));e["default"]=b.exports},1985:function(t,e,r){},"64b4":function(t,e,r){"use strict";r("1985")},"70ac":function(t,e,r){},ace4:function(t,e,r){"use strict";r("70ac")}}]);
//# sourceMappingURL=shop.f52dc57e.js.map